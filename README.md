# Магнит. Аналитическое приложение

## Требования

Для запуска процесса разработки проекта необходимо развернуть среду со следующими компонентами:

### [Node.js](https://nodejs.org)

[Node.js](https://nodejs.org) 11.15.x

## Развертывание проекта

- Клонируйте проект – `git clone https://bitbucket.org/buzzKillington/magnitanalytics.git`
- Перейдите в каталог с проектом (в терминале) – `cd magnitanalytics`
- Установите необходимые зависимости – `npm install`

## Команды (**`npm run...`**)

- **`lint`** – линтинг исходников
- **`test`** – прогонка unit-тетстов
- **`compile`** – единовременная компиляция всех исходников проекта
- **`build`** – единовременная сборка проекта
- **`validate`** – валидация проекта (линтинг, прогонка unit-тестов и полная сборка)
- **`start`** – запуск среды для разработки с прокси для mock-запросов на [apiary](https://apiary.io)
- **`demo`** – запуск проекта в demo-режиме с прокси для реальных запросов в Qlik
- **`startdemo`** – запуск среды для разработки с прокси для реальных запросов в Qlik
- **`startapi`** – запуск среды для разработки в режиме тестирования API

## Структура проекта

### Постоянные каталоги

- **compile** – скрипты для разработки и сборки проекта
- **docs** – документация
- **src** – исходники проекта

### Генерируемые каталоги

- **public** – результат быстрой сборки в процессе активной разработки (ресурсы для локального сервера), обновляется при каждом изменении исходных файлов
- **build** – результат полной сборки проекта (production-версия)

### Файлы

- **.browserslistrc** - настройки **[Browserlist](https://github.com/browserslist/browserslist)** (единые настройки поддерживаемых браузеров для транспайлера и процессоров)
- **.stylelintrc** - настройки **[stylelint](https://stylelint.io/)** (линтер стилей)
- **.eslintrc** - настройки **[ESLint](https://eslint.org/)** (линтер скриптов и компонентов)
- **jest.config.js** - настройки **[Jest](https://jestjs.io/)** (unit-тесты)
- **.huskyrc** - настройки git-хуков **[Husky](https://www.npmjs.com/package/husky)**

## Скрипты для разработки (**compile**)

- **amazo** – наблюдатель за исходниками. Запускает обработку изменившегося ресурса после сохранения файла на диск
- **antimonitor** – процессор **SVG-графики**, сборщик спрайтов
- **bizarro** – локальный сервер. Если путь из адресной строки не найден в файловой системе, всегда возвращает index.html (роутинг для PWA)
- **dictionaries** - создаёт словари локализации xlsx --> json.
- **grundy** – генератор **HTML-разметки**. Генерирует разметку в зависимости от выбранного режима разработки
- **lobo** – транспайлер **JavaScript**, компилятор компонентов **[Svelte](https://svelte.dev/)**
- **metallo** – настройки проекта
- **mongul** – сервер **LiveReload** (автоматическая перезагрузка обновленных ресурсов в браузере)
- **mxy** – оповещение о действиях, прогрессе и ошибках в процессе разработки в терминале и на уровне ОС
- **starro** – процессоры стилей **[Sass](https://sass-lang.com/libsass)** и **[Autoprefixer](https://github.com/postcss/autoprefixer)**
- **zod** – менеджер процессов разработки и сборки

## Исходники (**src**)

### Графика (**src/sprites**)

Каждый каталог, содержащий SVG-файлы, будет собран в отдельный набор спрайтов (в начале разработки или при сборке проекта) и включен в HTML-разметку. Каждому спрайту будет присвоен ID по формуле ** txspt-<имя_каталога>-<имя_файла> **

Вся графика оптимизируется во время генерации наборов с помощью **[SVGO](https://github.com/svg/svgo)**

### Стили (**src/sass**)

[Стили](docs/STYLES.md)

### Скрипты и компоненты (**src/js**)

[Скрипты и компоненты](docs/SCRIPTS.md)

